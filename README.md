# 煤矿技改概算管控与模拟分析系统

> 平煤神马塔能伊斯法拉公司煤矿（原舒拉8号井）技术改造项目  
> 项目建设总投资: **56,397.84万元**

## 系统功能

1. **领导驾驶舱** - 总概算执行率、六大费用类别对比、工程进度、风险预警
2. **工程项目管理** - 184个子工程CRUD、进度跟踪、里程碑管理
3. **概算科目管理** - 三级科目树形结构、概算分配
4. **支出管理** - 手动录入、Excel批量导入、用友NCC对接
5. **现金流管理** - 收入/支出跟踪、月度图表、导出Excel、审批工作流
6. **模拟分析中心** - What-if分析、情景对比、敏感性分析（龙卷风图）
7. **预警管理** - 概算超支预警、工期延误预警、消耗速率预警
8. **月度考核报表** - 自动生成、数据导出
9. **用户权限管理** - 管理员/领导/部门用户/普通用户 四级角色

## 技术栈

- **前端**: Vue 3 + TypeScript + Element Plus + ECharts
- **后端**: Python FastAPI + SQLAlchemy
- **数据库**: SQLite（开发）/ PostgreSQL（生产）

## 快速启动

### 后端

```bash
cd backend
pip install -r requirements.txt
python run.py
```

后端运行在 http://localhost:8000，API文档: http://localhost:8000/docs

### 前端

```bash
cd frontend
npm install
npm run dev
```

前端运行在 http://localhost:3000

### 演示账号

| 角色 | 用户名 | 密码 | 权限 |
|------|--------|------|------|
| 管理员 | admin | admin123 | 全部功能 |
| 领导 | leader | leader123 | 查看+模拟分析+审批 |
| 部门用户 | engineer | eng123 | 本部门数据录入+全局查看 |
| 普通员工 | viewer | view123 | 只读查看 |

## 概算结构

| 费用类别 | 金额(万元) |
|---------|-----------|
| 矿建工程费 | 13,176.53 |
| 土建工程费 | 9,035.35 |
| 安装工程费 | 14,293.29 |
| 设备购置费 | 14,116.51 |
| 其他费用 | 4,574.25 |
| 预备费 | 1,201.91 |
| **合计** | **56,397.84** |

> 系统默认预留7%弹性预备金（可配置5%-10%），以备不时之需。

## 已导入数据

- 6个L1概算科目，48个L2概算科目
- 184个子工程（矿建31、土建35、安装80+、其他8、设备购置1、利旧设备安装1）
- 413条成本明细（357+设备购置项、33利旧设备）
